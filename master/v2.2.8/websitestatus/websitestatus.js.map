{"version":3,"sources":["../../../../src/websitestatus/websitestatus.es6"],"names":["reposition_dialogs","min","parent","each","top","css","replace","animate","website_status","data","site_status","toLowerCase","$ele","is","accountstatus","is_shown","slideUp","message","append","i18n","html","slideDown","set_currency_config","currencies_config","local_storage","set","liveapi","events","on","cached","send","then"],"mappings":";;;;;;;;;;;;;;;AAIA,QAAMA,qBAAqB,SAArBA,kBAAqB,CAACC,GAAD,EAAS;AAChC,8BAAE,mBAAF,EAAuBC,MAAvB,GAAgCC,IAAhC,CAAqC,YAAY;AAC7C,gBAAMC,MAAM,sBAAE,IAAF,EAAQC,GAAR,CAAY,KAAZ,EAAmBC,OAAnB,CAA2B,IAA3B,EAAiC,EAAjC,IAAuC,CAAnD;AACA,gBAAIF,OAAOH,GAAX,EAAgB;AACZ,sCAAE,IAAF,EAAQM,OAAR,CAAgB,EAAEH,KAAKH,GAAP,EAAhB,EAA8B,GAA9B;AACH;AACJ,SALD;AAMH,KAPD;AAQA,QAAMO,iBAAiB,SAAjBA,cAAiB,CAACC,IAAD,EAAU;AAC7B,YAAI,CAACA,KAAKD,cAAV,EAA0B;AAAE;AAAS;AACrC,YAAIC,KAAKD,cAAL,CAAoBE,WAApB,CAAgCC,WAAhC,OAAkD,IAAtD,EAA4D;AACxD,gBAAMC,OAAO,sBAAE,mBAAF,CAAb;AACAA,iBAAKC,EAAL,CAAQ,UAAR,KAAuB,CAACC,wBAAcC,QAAd,EAAxB,IAAoDH,KAAKI,OAAL,CAAa,GAAb,CAApD,IAAyEhB,mBAAmB,GAAnB,CAAzE;AACH,SAHD,MAIK;AACD,gBAAMY,QAAO,sBAAE,mBAAF,CAAb;AACA,gBAAMK,UAAU,sBAAE,0BAAF,EAA8BC,MAA9B,CAAqCT,KAAKD,cAAL,CAAoBS,OAApB,IAA+B,gEAAgEE,IAAhE,EAApE,CAAhB;AACAP,kBAAKQ,IAAL,CAAUH,OAAV,KAAsBL,MAAKS,SAAL,CAAe,GAAf,CAAtB,IAA6CrB,mBAAmB,GAAnB,CAA7C;AACH;AACDsB,4BAAoBb,KAAKD,cAAzB;AACH,KAZD;;AAcA,QAAMc,sBAAsB,SAAtBA,mBAAsB,CAACd,cAAD,EAAoB;AAC5C,YAAIA,eAAee,iBAAnB,EAAsC;AAClC;AACAC,0BAAcC,GAAd,CAAkB,mBAAlB,EAAuCjB,eAAee,iBAAtD;AACH;AACJ,KALD;;AAOAG,gCAAQC,MAAR,CAAeC,EAAf,CAAkB,gBAAlB,EAAoCpB,cAApC;AACAkB,gCAAQG,MAAR,CAAeC,IAAf,CAAoB,EAAEtB,gBAAgB,CAAlB,EAApB,EAA2CuB,IAA3C,CAAgDvB,cAAhD","file":"websitestatus.js","sourcesContent":["import $ from 'jquery';\r\nimport liveapi from '../websockets/binary_websockets';\r\nimport accountstatus from '../accountstatus/accountstatus';\r\n\r\nconst reposition_dialogs = (min) => {\r\n    $('.webtrader-dialog').parent().each(function () {\r\n        const top = $(this).css('top').replace('px', '') * 1;\r\n        if (top <= min) {\r\n            $(this).animate({ top: min }, 300);\r\n        }\r\n    });\r\n}\r\nconst website_status = (data) => {\r\n    if (!data.website_status) { return; }\r\n    if (data.website_status.site_status.toLowerCase() === \"up\") {\r\n        const $ele = $(\"#msg-notification\");\r\n        $ele.is(\":visible\") && !accountstatus.is_shown() && $ele.slideUp(500) && reposition_dialogs(110);\r\n    }\r\n    else {\r\n        const $ele = $(\"#msg-notification\");\r\n        const message = $('<div class=\"error-msg\"/>').append(data.website_status.message || 'Seems like our servers are down, we are working on fixing it.'.i18n());\r\n        $ele.html(message) && $ele.slideDown(500) && reposition_dialogs(140);\r\n    }\r\n    set_currency_config(data.website_status);\r\n};\r\n\r\nconst set_currency_config = (website_status) => {\r\n    if (website_status.currencies_config) {\r\n        // This is used in common/util.js to determine the fractional_digits. Also, used for categorising the currencies inn currency selection dropdown.\r\n        local_storage.set(\"currencies_config\", website_status.currencies_config);\r\n    }\r\n};\r\n\r\nliveapi.events.on('website_status', website_status);\r\nliveapi.cached.send({ website_status: 1 }).then(website_status);\r\n"]}