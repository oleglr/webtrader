{"version":3,"sources":["../../../../src/navigation/navigation.es6"],"names":["menu_selectors","getType","acc","id","loginid","type","MLT","MF","VRTC","REAL","currency","toUpperCase","match","initLoginButton","root","account_menu","find","time","state","show_login","local_storage","get","login_disabled","logout_disabled","account","show","balance","is_virtual","show_submenu","show_new_account_link","openRealAccount","real_account_binary_url","getBinaryUrl","window","open","openFinancialAccountMF","financial_account_binary_url","destroy_windows","data_attribute","each","inx","elm","dlg","dialog","one","_","defer","remove","oauth","map","e","showLoginWin","require","login_win","init","toggleVisibility","value","logout","liveapi","invalidate","switchAccount","switch_account","catch","err","$","growl","error","message","code","rv","bind","update_balance","data","authorize","formatPrice","events","on","loginId","set","is_current_account_real","getLandingCompany","then","what_todo","show_financial_link","show_realaccount_link","loginIds","loginids","has_real_account","some","is_real","has_mf_or_mlt","is_mf","is_mlt","has_disabled_account","is_disabled","oAuthLoginIds","lockedIds","filter","s_disabled","join","fixed","i18n","replace","console","log","text","moment","utc","format","setInterval","initLang","addBack","lang","name","confirm","visible","languages","onclick","location","reload","contact_us_el","document","getElementById","logo_container","href","cached","send","website_status","supported_languages","m","toLowerCase","newList","intersectionBy","length","forEach","push","Promise","all","landing_company","country","landing_company_details","landing_company_name","results","virtual_company","financial_company","financial","gaming","gaming_company","curr_login","test","shortcode","is_mx","cr_accts","is_cr","legal_allowed_currencies","currencies_config","has_fiat","crypto_currencies","difference","curr","acct","has_crypto","has_all_crypto","callback","$navHtml","prepend","menu","workspace","is_beta","closest","selector","nav_selector","dialog_selector","current_selector","click","fadeToggle","css","mouseup","is","target","has","hide"],"mappings":"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","file":"navigation.js","sourcesContent":["import $         from 'jquery';\r\nimport moment    from 'moment';\r\nimport _         from 'lodash';\r\nimport liveapi   from '../websockets/binary_websockets';\r\nimport rv        from '../common/rivetsExtra';\r\nimport $navHtml  from 'text!./navigation.html';\r\nimport workspace from '../workspace/workspace.js';\r\nimport '../common/util';\r\nimport 'css!navigation/navigation.css';\r\n\r\nconst menu_selectors = [\r\n   '.trade',\r\n   '.instruments',\r\n   '.resources',\r\n   '.workspace'\r\n];\r\n\r\nconst getType = (acc) => {\r\n   let id = acc.loginid || acc.id;\r\n   if(!acc || !id) return;\r\n   const type = {\r\n         MLT:'Gaming', \r\n         MF:'Investment',\r\n         VRTC:'Virtual',\r\n         REAL:(acc.currency || '').toUpperCase() || 'Real',\r\n   };\r\n\r\n   id = id.match(/^(MLT|MF|VRTC)/i) ? id.match(/^(MLT|MF|VRTC)/i)[0] : 'REAL';\r\n\r\n   return type[id] + ' Account';\r\n};\r\n\r\nconst initLoginButton = (root) => {\r\n   const account_menu = root.find('.account-menu');\r\n   const time = root.find('span.time');\r\n   const state = {\r\n      show_login: local_storage.get('oauth') ? false : true,\r\n      login_disabled: false,\r\n      currency: '',\r\n      logout_disabled: false,\r\n      account: {\r\n         show: false,\r\n         type: '',\r\n         id: '',\r\n         balance: '',\r\n         is_virtual: 0,\r\n      },\r\n      show_submenu: false,\r\n      show_new_account_link: false,\r\n      openRealAccount: () => {\r\n         const real_account_binary_url = getBinaryUrl('new_account/realws.html');\r\n         window.open(real_account_binary_url, '_blank');\r\n      },\r\n      openFinancialAccountMF: () => {\r\n         const financial_account_binary_url = getBinaryUrl('new_account/maltainvestws');\r\n         window.open(financial_account_binary_url, '_blank');\r\n      }\r\n   };\r\n\r\n   const destroy_windows = (data_attribute) => {\r\n      $(`.webtrader-dialog[${data_attribute}]`).each((inx, elm) => {\r\n         const dlg = $(elm);\r\n         dlg.dialog('close');\r\n         dlg.one('dialogclose', () => {\r\n            _.defer(() => dlg.dialog('instance') && dlg.dialog('destroy') && dlg.remove());\r\n         });\r\n      });\r\n   }\r\n\r\n   state.oauth = local_storage.get('oauth') || [];\r\n   state.oauth = state.oauth.map((e) => {\r\n      e.type = getType(e);\r\n      return e;\r\n   });\r\n   state.showLoginWin = () => {\r\n      state.login_disabled = true;\r\n      require(['oauth/login'], (login_win) => {\r\n         state.login_disabled = false;\r\n         login_win.init();\r\n      });\r\n   };\r\n\r\n   state.toggleVisibility = (value) => {\r\n      state.show_submenu = value;\r\n   };\r\n\r\n   state.logout = () => {\r\n      liveapi.invalidate();\r\n      state.logout_disabled = true;\r\n   };\r\n\r\n   state.switchAccount = (id) => {\r\n      destroy_windows('data-account-specific=true');\r\n      liveapi.switch_account(id)\r\n         .catch((err) => {\r\n            $.growl.error({ message: err.message });\r\n            // logout user if he decided to self exclude himself.\r\n            if (err.code === 'SelfExclusion') {\r\n               liveapi.invalidate();\r\n            }\r\n         });\r\n   }\r\n\r\n   rv.bind(account_menu, state);\r\n\r\n   const update_balance = (data) => {\r\n      if (!state.currency) {\r\n         /* We're not going to set currency automatically, since the user might select a different currency  */\r\n         if (local_storage.get('currency')){\r\n            state.currency = local_storage.get('currency');\r\n         } else \r\n         return;\r\n      }\r\n\r\n      let value = '0';\r\n      if (data.authorize) value = data.authorize.balance;\r\n      else if (data.balance) value =  data.balance.balance ;\r\n      else return;\r\n\r\n      state.account.balance = formatPrice(value, state.currency);\r\n   };\r\n\r\n   /* update balance on change */\r\n   liveapi.events.on('balance', data => {\r\n      const loginId = local_storage.get('authorize').loginid;\r\n      if (data.balance && data.balance.loginid === loginId) update_balance(data);\r\n   });\r\n\r\n   liveapi.events.on('logout', () => {\r\n      destroy_windows('data-authorized=true');\r\n      destroy_windows('data-account-specific=true');\r\n      /* destroy all authorized dialogs */\r\n      state.logout_disabled = false;\r\n      state.account.show = false;\r\n      state.show_login = true;\r\n      state.account.id = '';\r\n      state.account.balance = '';\r\n      state.account.type = '';\r\n      state.currency = '';\r\n\r\n      local_storage.remove('currency');\r\n   });\r\n\r\n   liveapi.events.on('login', (data) => {\r\n      destroy_windows('data-authorized=true');\r\n      /* destroy all authorized dialogs */\r\n      state.show_login = false;\r\n      state.account.show = true;\r\n      state.account.id = data.authorize.loginid;\r\n      state.account.is_virtual = data.authorize.is_virtual;\r\n      state.oauth = local_storage.get('oauth') || [];\r\n      state.oauth = state.oauth.map((e) => {\r\n         e.type = getType(e);\r\n         return e;\r\n      });\r\n      state.account.type = getType(data.authorize);\r\n\r\n      state.currency = data.authorize.currency;\r\n      local_storage.set('currency', state.currency);\r\n      update_balance(data);\r\n      const is_current_account_real = data.authorize.is_virtual === 0;\r\n\r\n      getLandingCompany().then((what_todo) => {\r\n         state.show_financial_link = (what_todo === 'upgrade-mf');\r\n         state.show_realaccount_link = (what_todo === 'upgrade-mlt');\r\n         const loginIds = loginids();\r\n         state.has_real_account = _.some(loginIds, { is_real: true });\r\n         state.has_mf_or_mlt = _.some(loginIds, { is_mf: true }) || _.some(loginIds, { is_mlt: true });\r\n         state.show_new_account_link = what_todo === 'new-account';\r\n         state.has_disabled_account =  _.some(loginIds, { is_disabled: true });\r\n         // https://trello.com/c/9PCHncnx/5146-8-raunak-accountlistordering\r\n         // https://trello.com/c/fNZ1Zkbb/2529-negar-accountlistauthorize\r\n         if(_.some(oAuthLoginIds(), { is_disabled: true })) {\r\n            const lockedIds = _.filter(loginIds, { s_disabled:true }).map(acc => acc.id).join(',');\r\n            $.growl.error({\r\n               fixed: true,\r\n               message:`<a href='${getBinaryUrl('contact.html')}' target='_blank'>\r\n                ${'Your account (%) is locked, please contact customer support for more info.'.i18n().replace('%', lockedIds)}\r\n               </a>`\r\n            });\r\n         }\r\n      });\r\n   });\r\n\r\n   // Restore login-button in case of login-error\r\n   $('.login').on('login-error', (e) => {\r\n      console.log('Encountered login error');\r\n      state.show_login = true;\r\n   });\r\n\r\n   /* update time every second */\r\n   time.text(moment.utc().format('YYYY-MM-DD HH:mm:ss') + ' GMT');\r\n   setInterval(() => {\r\n      time.text(moment.utc().format('YYYY-MM-DD HH:mm:ss') + ' GMT');\r\n   }, 1000);\r\n}\r\n\r\nconst initLang = (root) => {\r\n   root = root.find('#topbar').addBack('#topbar');\r\n   const state = {\r\n      lang: {\r\n         value: 'en', name: 'English'\r\n      },\r\n      confirm: {\r\n         visible: false\r\n      },\r\n      languages: [\r\n         { value: 'en', name: 'English'},\r\n         { value: 'de', name: 'Deutsch'},\r\n         { value: 'es', name: 'Español'},\r\n         { value: 'fr', name: 'Français'},\r\n         // { value: 'id', name: 'Indonesia'},\r\n         { value: 'it', name: 'Italiano'},\r\n         { value: 'pl', name: 'Polish'},\r\n         { value: 'pt', name: 'Português'},\r\n         { value: 'ru', name: 'Русский'},\r\n         { value: 'th', name: 'Thai'},\r\n         { value: 'vi', name: 'Tiếng Việt'},\r\n         { value: 'zh_cn', name: '简体中文'},\r\n         { value: 'zh_tw', name: '繁體中文'}\r\n      ],\r\n   };\r\n\r\n   state.onclick = (value) => {\r\n      state.confirm.visible = false;\r\n      const lang = _.find(state.languages, { value: value });\r\n      if(lang && state.lang && lang.value == state.lang.value)\r\n         return;\r\n\r\n      local_storage.set('i18n', { value: lang.value });\r\n      window.location.reload();\r\n   };\r\n\r\n   state.toggleVisibility = (visible) => {\r\n      state.confirm.visible = visible;\r\n   }\r\n\r\n   const lang = (local_storage.get('i18n') || { value: 'en' }).value;\r\n   state.lang = _.find(state.languages, { value: lang }); // set the initial state.\r\n\r\n   const contact_us_el = document.getElementById('contact-us');\r\n   const logo_container = document.getElementById('logo-container');\r\n\r\n   contact_us_el.href = getBinaryUrl('contact.html');\r\n   logo_container.href = getBinaryUrl('home.html');\r\n\r\n   rv.bind(root[0], state);\r\n\r\n   //Init the trigger of loading language list from server\r\n   liveapi\r\n      .cached\r\n      .send({website_status: 1})\r\n      .then((data) => {\r\n         let supported_languages = (data.website_status || {}).supported_languages || [];\r\n         supported_languages = _.map(supported_languages, (m) => ({ value: m.toLowerCase() }));\r\n         const newList = _.intersectionBy(state.languages, supported_languages, 'value') || [];\r\n         state.languages.length = 0;\r\n         newList.forEach(\r\n            (e) => state.languages.push(e)\r\n         );\r\n      })\r\n      .catch(console.error);\r\n}\r\n\r\n/*\r\n  1: company = (gaming company) && (financial company && financial company shortcode = maltainvest)\r\n     a: no MLT account  ==> upgrade to MLT\r\n     b: has MLT account\r\n        I:     upgrade to MF\r\n    c: has both MLT & MF ==> do nothing\r\n  2: company = financial company &&  financial company shortcode = maltainvest) && there is NO gaming company\r\n     a: no MF account\r\n        I: company = financial ==> upgrade to MF\r\n     b: has MF account => do nothing\r\n  3: company & shortcode anything except above\r\n     a: no MLT, MX, CR account ==> upgrade to MLT, MX or CR\r\n     b: has MLT, MX ==> do nothing\r\n  4: company shortcode == japan\r\n     a: do nothing and show an error message\r\n  5: shortcode = svg\r\n     a: No currency\r\n       I: Do nothing.\r\n     b: Fiat currency && Not all crypto currency account\r\n       I: Allow crypto account\r\n     c: Crypto currency account && No fiat currency account\r\n      I: Allow fiat account\r\n     d: Fiat && all crypto account\r\n      I: do nothing.\r\n  returns 'upgrade-mlt' | 'upgrade-mf' | 'do-nothing' | 'new_account'\r\n*/\r\nexport const getLandingCompany = () => {\r\n   return liveapi.cached.authorize().then((data) => {\r\n      return Promise.all([\r\n            liveapi.cached.send({ landing_company: data.authorize.country }),\r\n            liveapi.cached.send({ landing_company_details: data.authorize.landing_company_name })\r\n         ])\r\n         .then((results) => {\r\n            const data = results[0];\r\n            const landing_company_details = data.landing_company.virtual_company === 'virtual' ?\r\n              data.landing_company.financial_company || {} :\r\n              results[1].landing_company_details || {};\r\n            const financial = data.landing_company.financial_company;\r\n            const gaming = data.landing_company.gaming_company;\r\n            const loginIds = loginids();\r\n            const curr_login = local_storage.get('oauth')[0];\r\n            curr_login.is_mlt = /MLT/.test(curr_login.id);\r\n            if (gaming && financial && financial.shortcode === 'maltainvest') { // 1:\r\n               if (_.some(loginIds, { is_mlt: true }) && (_.some(loginIds, { is_mf: true }) || !curr_login.is_mlt)) // 1-c\r\n                  return 'do-nothing';\r\n               if (_.some(loginIds, { is_mlt: true })) // 1-b\r\n                  return 'upgrade-mf';\r\n               return 'upgrade-mlt'; // 1-a\r\n            }\r\n            if (financial && financial.shortcode === 'maltainvest' && !gaming) { // 2:\r\n               if (_.some(loginIds, { is_mf: true })) // 2-b\r\n                  return 'do-nothing';\r\n               return 'upgrade-mf'; // 2-a\r\n            }\r\n            // 3:\r\n            if (_.some(loginIds, { is_mlt: true }) || _.some(loginIds, { is_mx: true }))\r\n               return 'do-nothing'; // 3-b\r\n            // 4: never happens, japan accounts are not able to log into webtrader.\r\n            // 5:\r\n            const cr_accts = _.filter(loginIds, { is_cr: true });\r\n            if( cr_accts.length && landing_company_details.legal_allowed_currencies) {\r\n               const currencies_config = local_storage.get('currencies_config') || {};\r\n               const has_fiat = _.some(cr_accts, { type: 'fiat' });\r\n               const crypto_currencies = _.difference(\r\n                  landing_company_details.legal_allowed_currencies.filter((curr) => {\r\n                     return currencies_config[curr].type === 'crypto';\r\n                  }),\r\n                  _.filter(cr_accts, {type: 'crypto'}).map((acct) => acct.currency)\r\n               );\r\n               const has_crypto = crypto_currencies.length && crypto_currencies.length !== (landing_company_details.legal_allowed_currencies.filter((curr) => {\r\n                  return currencies_config[curr].type === 'crypto';\r\n               }) || []).length;\r\n               const has_all_crypto = !crypto_currencies.length;\r\n               if((!has_fiat && has_crypto) || (has_fiat && !has_all_crypto)) {\r\n                  return 'new-account'; // 5-b and 5-c\r\n               }\r\n               return 'do-nothing'; // 5-d\r\n            }\r\n            return 'upgrade-mlt'; // 3-a (calls the normal account opening api which creates an mlt, mx or cr account).\r\n         })\r\n         .catch((err) => {\r\n            $.growl.error({ message: err.message });\r\n         });;\r\n   })\r\n   .catch((err) => {\r\n      $.growl.error({ message: err.message });\r\n   });\r\n}\r\n\r\nexport const init = (callback) => {\r\n   const root = $($navHtml).i18n();\r\n   $('body').prepend(root);\r\n\r\n   initLoginButton(root);\r\n   initLang(root);\r\n\r\n   //Load theme settings ...\r\n   require(['themes/themes']);\r\n\r\n   $('#nav-menu .resources > ul').menu();\r\n   workspace.init($('#nav-menu .workspace'));\r\n\r\n   if (callback) {\r\n      callback($('#nav-menu'));\r\n   }\r\n\r\n   //Show config <LI> if its production and not BETA\r\n   if (is_beta()) {\r\n      root.find('a.config').closest('li').show();\r\n   }\r\n\r\n   // Handle click navigation to show menu dialog\r\n   menu_selectors.forEach((selector) => {\r\n      const nav_selector = 'nav #nav-menu';\r\n      const dialog_selector = `${nav_selector} ${selector} > ul`;\r\n      const current_selector = `${nav_selector} ${selector}`;\r\n      const visible = {\r\n         'visibility': 'visible',\r\n         'opacity': 1,\r\n      };\r\n      $(current_selector).click((e) => {\r\n            $(dialog_selector).fadeToggle('fast',\r\n            () => {\r\n               $(dialog_selector).css(visible);\r\n            }\r\n         );\r\n      });\r\n      $(document).mouseup((e) => {\r\n         if (!$(current_selector).is(e.target) && $(current_selector).has(e.target).length === 0) {\r\n            $(dialog_selector).hide();\r\n         }\r\n      });\r\n   });\r\n}\r\n\r\nexport default {\r\n   init,\r\n   getLandingCompany\r\n};\r\n"]}