{"version":3,"sources":["../../../../src/cashier/uk_funds_protection.es6"],"names":["init_win","Promise","resolve","reject","$html","$","html","i18n","win","windows","createBlankWindow","title","dialogClass","width","height","resizable","collapsable","minimizable","maximizable","modal","ignoreTileAction","close","message","state","accept","liveapi","send","then","dialog","cancel","rv","bind"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAKO,QAAMA,8BAAW,SAAXA,QAAW;AAAA,eAAM,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC3D,gBAAMC,QAAQC,EAAEC,6BAAF,EAAQC,IAAR,EAAd;AACA,gBAAMC,MAAMC,kBAAQC,iBAAR,CAA0BN,KAA1B,EAAiC;AAC5CO,uBAAO,kBADqC;AAEzCC,6BAAa,gBAF4B;AAGzCC,uBAAO,GAHkC;AAIzCC,wBAAQ,GAJiC;AAKzCC,2BAAW,KAL8B;AAMzCC,6BAAa,KAN4B;AAOzCC,6BAAa,KAP4B;AAQzCC,6BAAa,KAR4B;AASzCC,uBAAO,IATkC;AAUzCC,kCAAkB,IAVuB;AAWzCC,uBAAO,iBAAW;AACdlB,2BAAO,EAAEmB,SAAS,iCAAX,EAAP;AACH;AAbwC,aAAjC,CAAZ;AAeA,gBAAMC,QAAQ,EAAd;AACAA,kBAAMC,MAAN,GAAe,YAAM;AACjBC,4CAAQC,IAAR,CAAa;AACT,oCAAgB,CADP;AAET,6CAAyB;AAFhB,iBAAb,EAGGC,IAHH,CAGQzB,OAHR,EAGgBC,MAHhB,EAGwBwB,IAHxB,CAG6B,YAAI;AAC7BnB,wBAAIoB,MAAJ,CAAW,OAAX;AACH,iBALD;AAMH,aAPD;;AASAL,kBAAMM,MAAN,GAAe,YAAM;AACpBrB,oBAAIoB,MAAJ,CAAW,OAAX;AACAzB,uBAAO,EAAEmB,SAAS,iCAAX,EAAP;AACA,aAHD;;AAKAQ,kCAAGC,IAAH,CAAQ3B,MAAM,CAAN,CAAR,EAAkBmB,KAAlB;AACAf,gBAAIoB,MAAJ,CAAW,MAAX;AACH,SAlC6B,CAAN;AAAA,KAAjB;;sBAoCQ;AACX5B;AADW,K","file":"uk_funds_protection.js","sourcesContent":["import windows from 'windows/windows';\r\nimport rv from 'common/rivetsExtra';\r\nimport liveapi from 'websockets/binary_websockets';\r\nimport html from 'text!cashier/uk_funds_protection.html';\r\n\r\nexport const init_win = () => new Promise((resolve, reject) => {\r\n    const $html = $(html).i18n();\r\n    const win = windows.createBlankWindow($html, {\r\n    \ttitle: \"Funds Protection\",\r\n        dialogClass: \"dialog-confirm\",\r\n        width: 700,\r\n        height: 300,\r\n        resizable: false,\r\n        collapsable: false,\r\n        minimizable: false,\r\n        maximizable: false,\r\n        modal: true,\r\n        ignoreTileAction: true,\r\n        close: function() {\r\n            reject({ message: \"Please accept funds protection.\" });\r\n        }\r\n    });\r\n    const state = {};\r\n    state.accept = () => {\r\n        liveapi.send({\r\n            \"tnc_approval\": 1,\r\n            \"ukgc_funds_protection\": 1\r\n        }).then(resolve,reject).then(()=>{\r\n            win.dialog(\"close\");\r\n        });\r\n    };\r\n\r\n    state.cancel = () => {\r\n    \twin.dialog(\"close\");\r\n    \treject({ message: \"Please accept funds protection.\" });\r\n    }\r\n\r\n    rv.bind($html[0], state);\r\n    win.dialog('open');\r\n});\r\n\r\nexport default {\r\n    init_win\r\n}\r\n"]}