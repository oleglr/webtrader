{"version":3,"sources":["../../../../src/charts/chartWindow.es6"],"names":["app_config","local_storage","get","WebtraderCharts","init","appId","liveapi","app_id","lang","server","socket_url","addNewWindow","options","options_copy","$parent","$","extend","title","instrumentName","relativePosition","close","chart","actions","destroy","dialog","remove","resize","reflow","refresh","open","parent","promise","done","windows","createBlankWindow","chartWindow","addNewChart","update_track","track","module_id","is_unique","data","events","anyChange"],"mappings":";;;;;;;;;;;;;;;;;;;;AAWA,QAAMA,aAAaC,cAAcC,GAAd,CAAkB,QAAlB,CAAnB,C,CAXA;;;;AAYAC,oBAAgBC,IAAhB,CAAqB;AACnBC,eAAOC,4BAAQC,MADI;AAEnBC,cAAM,IAFa;AAGnBC,gBAAQH,4BAAQI;AAHG,KAArB;;AAMO,QAAMC,sCAAe,SAAfA,YAAe,CAASC,OAAT,EAAkB;AAC1C,YAAMC,eAAeD,OAArB;AACA,YAAME,UAAU,sBAAE,QAAF,CAAhB;AACAF,kBAAUG,iBAAEC,MAAF,CAAS;AACfC,mBAAOL,QAAQM,cADA;AAEfC,8BAAkB,IAFH;AAGfC,mBAAO,iBAAW;AACdC,sBAAMC,OAAN,CAAcC,OAAd;AACA,sCAAE,IAAF,EAAQC,MAAR,CAAe,SAAf,EAA0BC,MAA1B,GAFc,CAEsB;AACvC,aANc;AAOfC,oBAAQ;AAAA,uBAAML,SAASA,MAAMC,OAAN,CAAcK,MAAd,EAAf;AAAA,aAPO;AAQfC,qBAAS;AAAA,uBAAMP,MAAMC,OAAN,CAAcM,OAAd,EAAN;AAAA,aARM;AASfC,kBAAM,gBAAW;AACb,oBAAML,SAAS,sBAAE,IAAF,CAAf;AACA,sCAAE,IAAF,EAAQM,MAAR,GAAiBC,OAAjB,GAA2BC,IAA3B,CAAgC;AAAA,2BAAMX,MAAMC,OAAN,CAAcK,MAAd,EAAN;AAAA,iBAAhC;AACH;AAZc,SAAT,EAaPf,OAbO,CAAV;AAcA,YAAMY,SAASS,kBAAQC,iBAAR,CAA0BpB,OAA1B,EAAmCF,OAAnC,CAAf;AACA,YAAMS,QAAQlB,gBAAgBgC,WAAhB,CAA4BC,WAA5B,CAAwCtB,OAAxC,EAAiDD,YAAjD,CAAd;AACAQ,cAAMC,OAAN,CAAcK,MAAd;;AAEA,YAAMU,eAAeb,OAAOc,KAAP,CAAa;AAC9BC,uBAAW,aADmB;AAE9BC,uBAAW,KAFmB;AAG9BC,kBAAMpB,MAAMoB,IAAN;AAHwB,SAAb,CAArB;AAKApB,cAAMqB,MAAN,CAAaC,SAAb,GAAyB;AAAA,mBAAMN,aAAahB,MAAMoB,IAAN,EAAb,CAAN;AAAA,SAAzB;;AAEAjB,eAAOA,MAAP,CAAc,MAAd;;AAEA,eAAOA,MAAP;AACH,KA/BM;;sBAkCQ;AACXb;AADW,K","file":"chartWindow.js","sourcesContent":["/**\r\n * Created by arnab on 2/13/15.\r\n */\r\nimport $ from \"jquery\";\r\nimport windows from \"../windows/windows\";\r\nimport 'highstock-release/modules/offline-exporting';\r\nimport 'highstock-release/highcharts-more';\r\nimport liveapi from '../websockets/binary_websockets';\r\nimport 'common/util';\r\nimport 'webtrader-charts';\r\n\r\nconst app_config = local_storage.get(\"config\");\r\nWebtraderCharts.init({\r\n  appId: liveapi.app_id,\r\n  lang: 'en',\r\n  server: liveapi.socket_url\r\n});\r\n\r\nexport const addNewWindow = function(options) {\r\n    const options_copy = options;\r\n    const $parent = $('<div/>');\r\n    options = $.extend({\r\n        title: options.instrumentName,\r\n        relativePosition: true,\r\n        close: function() {\r\n            chart.actions.destroy();\r\n            $(this).dialog('destroy').remove(); //completely remove this dialog\r\n        },\r\n        resize: () => chart && chart.actions.reflow(),\r\n        refresh: () => chart.actions.refresh(),\r\n        open: function() {\r\n            const dialog = $(this);\r\n            $(this).parent().promise().done(() => chart.actions.reflow());\r\n        }\r\n    }, options);\r\n    const dialog = windows.createBlankWindow($parent, options);\r\n    const chart = WebtraderCharts.chartWindow.addNewChart($parent, options_copy);\r\n    chart.actions.reflow();\r\n\r\n    const update_track = dialog.track({\r\n        module_id: 'chartWindow',\r\n        is_unique: false,\r\n        data: chart.data()\r\n    });\r\n    chart.events.anyChange = () => update_track(chart.data());\r\n\r\n    dialog.dialog('open');\r\n\r\n    return dialog;\r\n};\r\n\r\n\r\nexport default {\r\n    addNewWindow,\r\n};\r\n"]}