{"version":3,"sources":["../../../../src/tc/tc.es6"],"names":["win","landing_company_name","liveapi","events","on","data","dialog","authorize","is_virtual","cached","send","landing_company_details","name","init","div","html","i18n","find","click","then","window","location","reload","windows","createBlankWindow","title","width","minHeight","height","resizable","collapsable","minimizable","maximizable","closable","modal","closeOnEscape","ignoreTileAction","destroy","appendTo","append","binary_url_tc","getBinaryUrl","Array","from","document","getElementsByClassName","forEach","a_el","href"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,QAAIA,MAAM,IAAV;AAAA,QACIC,uBAAuB,EAD3B;;AAGAC,gCAAQC,MAAR,CAAeC,EAAf,CAAkB,OAAlB;AAAA,8EAA2B,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACvB,gCAAIL,GAAJ,EAAS;AACLA,oCAAIM,MAAJ,CAAW,SAAX;AACAN,sCAAM,IAAN;AACH;;AAJsB,iCAKnBK,KAAKE,SAAL,CAAeC,UALI;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mCAQeN,4BAAQO,MAAR,CAAeC,IAAf,CAAoB,EAAEC,yBAAyBN,KAAKE,SAAL,CAAeN,oBAA1C,EAApB,CARf;;AAAA;AAQjBU,mDARiB;;AASvBV,mDAAuBU,wBAAwBA,uBAAxB,IAAmDA,wBAAwBA,uBAAxB,CAAgDC,IAA1H;;AATuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA3B;;AAAA;AAAA;AAAA;AAAA;;AAYO,QAAMC,sBAAO,SAAPA,IAAO,GAAM;AACtB,YAAIZ,oBAAJ,EAA0B;AACtB,gBAAMa,MAAM,sBAAEC,YAAF,EAAQC,IAAR,EAAZ;AACAF,gBAAIG,IAAJ,CAAS,uBAAT,EAAkCF,IAAlC,CAAuCd,oBAAvC;AACAa,gBAAIG,IAAJ,CAAS,SAAT,EAAoBC,KAApB,CAA0B,YAAM;AAC5BhB,4CAAQQ,IAAR,CAAa,EAAE,gBAAgB,CAAlB,EAAb,EAAoCS,IAApC,CAAyC;AAAA,2BAAKC,OAAOC,QAAP,CAAgBC,MAAhB,EAAL;AAAA,iBAAzC,EAD4B,CAC6C;AACzEtB,oBAAIM,MAAJ,CAAW,SAAX;AACH,aAHD;AAIAN,kBAAMuB,kBAAQC,iBAAR,CAA0B,sBAAE,QAAF,CAA1B,EAAuC;AACzCC,uBAAO,uBAAuBT,IAAvB,EADkC;AAEzCU,uBAAO,GAFkC;AAGzCC,2BAAW,EAH8B;AAIzCC,wBAAQ,GAJiC;AAKzCC,2BAAW,KAL8B;AAMzCC,6BAAa,KAN4B;AAOzCC,6BAAa,KAP4B;AAQzCC,6BAAa,KAR4B;AASzCC,0BAAU,IAT+B;AAUzCC,uBAAO,IAVkC;AAWzCC,+BAAe,KAX0B;AAYzCC,kCAAkB,IAZuB;AAazC,mCAAmB,MAbsB;AAczCC,yBAAS,mBAAM;AACXrC,0BAAM,IAAN;AACH;AAhBwC,aAAvC,CAAN;AAkBAc,gBAAIwB,QAAJ,CAAatC,GAAb;AACA;AACA,kCAAE,MAAF,EAAUuC,MAAV,CAAiBvC,IAAIM,MAAJ,CAAW,QAAX,CAAjB;AACAN,gBAAIM,MAAJ,CAAW,MAAX;AACA,gBAAMkC,gBAAgBC,aAAa,2BAAb,CAAtB;AACAC,kBAAMC,IAAN,CAAWC,SAASC,sBAAT,CAAgC,SAAhC,CAAX,EAAuDC,OAAvD,CAA+D,UAACC,IAAD;AAAA,uBAAUA,KAAKC,IAAL,GAAYR,aAAtB;AAAA,aAA/D;AACH;AACJ,KAjCM;;sBAmCQ;AACX3B;AADW,K","file":"tc.js","sourcesContent":["/**\r\n * Created by arnab on 5/2/16.\r\n */\r\nimport $ from \"jquery\";\r\nimport windows from \"../windows/windows\";\r\nimport liveapi from \"../websockets/binary_websockets\";\r\nimport html from 'text!./tc.html';\r\nimport 'css!./tc.css';\r\n\r\nlet win = null,\r\n    landing_company_name = '';\r\n\r\nliveapi.events.on(\"login\", async (data) => {\r\n    if (win) {\r\n        win.dialog('destroy');\r\n        win = null;\r\n    }\r\n    if (data.authorize.is_virtual) {\r\n        return;\r\n    }\r\n    const landing_company_details = await liveapi.cached.send({ landing_company_details: data.authorize.landing_company_name });\r\n    landing_company_name = landing_company_details.landing_company_details && landing_company_details.landing_company_details.name;\r\n});\r\n\r\nexport const init = () => {\r\n    if (landing_company_name) {\r\n        const div = $(html).i18n();\r\n        div.find('.tc_landing_comp_name').html(landing_company_name);\r\n        div.find('.button').click(() => {\r\n            liveapi.send({ \"tnc_approval\": 1 }).then(_ => window.location.reload()); // Reload page to remove previous notification message\r\n            win.dialog('destroy');\r\n        });\r\n        win = windows.createBlankWindow($('<div/>'), {\r\n            title: 'Terms and Conditions'.i18n(),\r\n            width: 580,\r\n            minHeight: 90,\r\n            height: 220,\r\n            resizable: false,\r\n            collapsable: false,\r\n            minimizable: false,\r\n            maximizable: false,\r\n            closable: true,\r\n            modal: true,\r\n            closeOnEscape: false,\r\n            ignoreTileAction: true,\r\n            'data-authorized': 'true',\r\n            destroy: () => {\r\n                win = null;\r\n            }\r\n        });\r\n        div.appendTo(win);\r\n        //This helps in showing multiple dialog windows in modal form\r\n        $('body').append(win.dialog('widget'));\r\n        win.dialog('open');\r\n        const binary_url_tc = getBinaryUrl('terms-and-conditions.html');\r\n        Array.from(document.getElementsByClassName('tc-link')).forEach((a_el) => a_el.href = binary_url_tc);\r\n    }\r\n}\r\n\r\nexport default {\r\n    init\r\n};\r\n\r\n"]}