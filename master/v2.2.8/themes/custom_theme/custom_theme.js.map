{"version":3,"sources":["../../../../../src/themes/custom_theme/custom_theme.es6"],"names":["chartData","prevTheme","$","extend","Highcharts","getOptions","win","themeConf","createThemeObject","id","color","substring","indexOf","temp","end","split","forEach","property","index","arr","length","JSON","parse","init","$menuLink","click","moveToTop","$html","html","i18n","find","each","ele","attr","replace","alpha","val","getCurrentValue","css","background","setOptions","data","colorpicker","showOn","position","my","of","collision","part","map","size","bar","colorFormat","open","event","colorPicker","setColor","select","formatted","updateChart","ok","cancel","windows","createBlankWindow","autoOpen","resizable","collapsable","minimizable","maximizable","closable","closeOnEscape","width","height","title","modal","destroy","buttons","Apply","require","themes","$ele","elementText","text","themeName","confirmationDialog","Cancel","dialog","resetTheme","createChart","value","obj","defaultOptions","prop","chartOptions","chart","spacingLeft","marginLeft","series","type","navigator","enabled","credits","href","xAxis","ordinal","yAxis","opposite","rangeSelector","tooltip","crosshairs","dashStyle","enabledIndicators","exporting","highcharts"],"mappings":"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","file":"custom_theme.js","sourcesContent":["/**\r\n * Created by apoorv on 9/06/16.\r\n */\r\nimport $ from 'jquery';\r\nimport windows from '../../windows/windows';\r\nimport 'highstock-release/highstock';\r\nimport 'color-picker';\r\nimport html from 'text!./custom_theme.html';\r\nimport 'css!./custom_theme.css';\r\n\r\nconst chartData = [\r\n   [1452412800, 32.87, 33.75, 32.50, 33.28], [1452427200, 33.27, 34.45, 32.81, 34.22],\r\n   [1452441600, 34.23, 34.73, 33.72, 33.77], [1452456000, 34.23, 34.48, 33.73, 33.84],\r\n   [1452470400, 33.84, 34.42, 33.20, 33.33], [1452484800, 33.34, 33.73, 32.80, 33.55],\r\n   [1452499200, 32.70, 33.22, 32.56, 32.91], [1452513600, 32.89, 33.38, 32.05, 32.17],\r\n   [1452528000, 32.16, 32.20, 31.21, 31.54], [1452542400, 30.80, 31.87, 30.76, 31.65],\r\n   [1452556800, 31.66, 32.37, 30.88, 31.09], [1452571200, 31.10, 31.27, 30.38, 30.84],\r\n   [1452585600, 31.52, 31.84, 31.23, 31.48]\r\n];\r\nlet prevTheme = $.extend(true, {}, Highcharts.getOptions(), {}),\r\n    win = null,\r\n    themeConf = {};\r\n\r\nconst createThemeObject = (id, color) => {\r\n   if (!color) {\r\n      return;\r\n   }\r\n\r\n   color = color.substring(0, color.indexOf(')') + 1); //Fixing mozilla bug\r\n   let temp = \"\",  end = \"\";\r\n   id.split(\"_\").forEach((property, index, arr) => {\r\n      end = end + \"}\";\r\n      if (index === arr.length - 1) {\r\n         temp = temp + \"{\" + \"\\\"\" + property + \"\\\"\" + \":\" + \"\\\"\" + color + \"\\\"\";\r\n         return;\r\n      }\r\n      temp = temp + \"{\" + \"\\\"\" + property + \"\\\"\" + \":\";\r\n   });\r\n   temp = temp + end;\r\n   $.extend(themeConf, JSON.parse(temp));\r\n}\r\n\r\nexport const init = ($menuLink) => {\r\n   $menuLink.click(() => {\r\n      if(win) {\r\n         win.moveToTop();\r\n         return;\r\n      }\r\n      const $html = $(html).i18n();\r\n      $html.find(\".color_input_width\").each((index, ele) => {\r\n         const id = $(ele).attr(\"id\").replace(\"theme_\", \"\"),\r\n            alpha = $(ele).attr(\"alpha\");\r\n         let val = getCurrentValue(id);\r\n\r\n         if (val) {\r\n            $(ele).css({background: val});\r\n         } else {\r\n            val = $(ele).css(\"background-color\");\r\n            createThemeObject(id, val);\r\n            Highcharts.setOptions(themeConf);\r\n         }\r\n         $(ele).data(\"prevColor\",val);\r\n         $(ele).colorpicker({\r\n            showOn: 'click',\r\n            position: {\r\n               my: \"left+50 bottom+100\",\r\n               of: \"element\",\r\n               collision: \"fit\"\r\n            },\r\n            part: {\r\n               map: {size: 128},\r\n               bar: {size: 128}\r\n            },\r\n            alpha: alpha? true: false,\r\n            colorFormat: \"RGBA\",\r\n            open: function(event, color) {\r\n               color.colorPicker.setColor($(this).css(\"background-color\"));\r\n            },\r\n            select: (event, color) => {\r\n               $(ele).css({\r\n                  background: color.formatted\r\n               }).val('');\r\n               createThemeObject(id, color.formatted);\r\n               updateChart();\r\n            },\r\n            ok: (event, color) => {\r\n               if(!color.formatted){\r\n                  return;\r\n               }\r\n               $(ele).css({\r\n                  background: color.formatted\r\n               }).val('');\r\n               $(ele).data(\"prevColor\",$(ele).css(\"background-color\"));\r\n               createThemeObject(id, color.formatted);\r\n               updateChart();\r\n            },\r\n            cancel: (event) => {\r\n               $(ele).css({\r\n                  background: $(ele).data(\"prevColor\")\r\n               }).val('');\r\n               createThemeObject(id, $(ele).data(\"prevColor\"));\r\n               updateChart();\r\n            }\r\n         });\r\n      });\r\n\r\n      win = windows.createBlankWindow($html,\r\n         {\r\n            autoOpen: false,\r\n            resizable: false,\r\n            collapsable: false,\r\n            minimizable: false,\r\n            maximizable: false,\r\n            closable: false,\r\n            closeOnEscape: false,\r\n            width: 650,\r\n            height: 515,\r\n            title: 'Customize chart appearance'.i18n(),\r\n            modal: true,\r\n            destroy: () => { win = null; },\r\n            buttons: {\r\n               Apply: () => require(['themes/themes'],\r\n                  (themes) => {\r\n                     const $ele = $('a.theme_custom');\r\n                     const elementText = $ele.text();\r\n                     const themeName = $ele.attr('theme-name');\r\n                     themes.confirmationDialog(Highcharts.getOptions(), themeName, elementText);\r\n                  }\r\n               ),\r\n               Cancel: function () {\r\n                  $(this).dialog('close');\r\n                  $(this).dialog(\"destroy\");\r\n                  resetTheme();\r\n               }\r\n            }\r\n         });\r\n\r\n      win.dialog('open');\r\n      createChart();\r\n   });\r\n}\r\n\r\nconst getCurrentValue = (id) => {\r\n   let value = prevTheme;\r\n   id.split(\"_\").forEach((obj) => {\r\n      if (value)  value = value[obj];\r\n   });\r\n   return value;\r\n}\r\n\r\nconst resetTheme = () => {\r\n   const defaultOptions = Highcharts.getOptions();\r\n   for (const prop in defaultOptions) {\r\n      if (typeof defaultOptions[prop] !== 'function') delete defaultOptions[prop];\r\n   }\r\n   Highcharts.setOptions(prevTheme);\r\n}\r\n\r\nconst createChart = () => {\r\n   const chartOptions = {\r\n      chart: {\r\n         spacingLeft: 0,\r\n         marginLeft: 45, /* disable the auto size labels so the Y axes become aligned */\r\n         //,plotBackgroundImage: 'images/binary-watermark-logo.svg'\r\n      },\r\n      series: [{\r\n         type: \"candlestick\",\r\n         data: chartData\r\n      }],\r\n      navigator: {\r\n         enabled: true,\r\n         series: {\r\n            id: 'navigator'\r\n         }\r\n      },\r\n\r\n      title: {\r\n         //Show name on chart if it is accessed with affiliates = true parameter. In normal webtrader mode, we dont need this title because the dialog will have one\r\n         text: 'Some random index'.i18n()\r\n      },\r\n\r\n      credits: {\r\n         href: '#',\r\n         text: '',\r\n      },\r\n\r\n      xAxis: {\r\n         ordinal: false\r\n      },\r\n\r\n      yAxis: [{\r\n         opposite: false,\r\n      }],\r\n\r\n      rangeSelector: {\r\n         enabled: false\r\n      },\r\n\r\n      tooltip: {\r\n         crosshairs: [{\r\n            width: 2,\r\n            color: 'red',\r\n            dashStyle: 'dash'\r\n         }, {\r\n            width: 2,\r\n            color: 'red',\r\n            dashStyle: 'dash'\r\n         }],\r\n         enabled: true,\r\n         enabledIndicators: true\r\n      },\r\n      exporting: {\r\n         enabled: false\r\n      }\r\n   };\r\n   $(\"#preview-chart\").highcharts('StockChart', chartOptions);\r\n}\r\n\r\nconst updateChart = () => {\r\n   Highcharts.setOptions(themeConf);\r\n   $(\"#preview-chart\").highcharts().destroy();\r\n   createChart();\r\n}\r\n\r\nexport default { init }\r\n"]}